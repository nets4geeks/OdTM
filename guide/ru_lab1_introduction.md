/ [главаная](ru_readme.md) /

# Лабораторная работа 1: Введение в онтологическое моделирование угроз

### Основы моделирования угроз

Классический подход к моделированию угроз основан на [диаграммах потоков данных](https://www.google.com/search?q=Shostack+A.+Experiences+Threat+Modeling+at+Microsoft).
Также существует ряд [альтернативных подходов](https://insights.sei.cmu.edu/sei_blog/2018/12/threat-modeling-12-available-methods.html).

Вы можете использовать приложение [OWASP Threat Dragon](https://github.com/OWASP/threat-dragon-desktop/releases) для работы с диаграммами и моделями угроз.
Threat Dragon имеет встроенный движок моделирования угроз, поддерживающий техники STRIDE, CIA, LINDDUN.
Вместо них в этой и следующих лабораторных работах используется оригинальная утилита [OdTMServer](instruction.md),
поддерживающая онтологический подход к моделированию угроз и предметно-ориентированные (мета)модели угроз.


Рассмотрим простейшую компьютерную систему, которая состоит из веб-приложения (процесса) и базы данных (хранилища).
Пользователи (внешние сущности) работают с компьютерной системой.
Коммуникации (потоки данных) между элементами системы осуществляются посредством сетевых технологий: пользователь и веб-приложение взаимодействуют по протоколу HTTPS, 
а веб-приложение с базой данных - по протоколу SQL (условно).

Для анализа аспектов информационной безопасности подобной компьютерной системы может быть создана диаграмма, показанная на рисунке:

![lab1_example1](pics/lab1_example1.png)

После обработки этой диаграммы утилитой OdTMServer [модель угроз](models/lab1_example1_modelled.json) (**Пример 1**) будет состоять из набора типовых угроз STRIDE,
ассоциированных с ее элементами. Например, элемент db (см. скриншот ниже) подвержен незаконному изменению (Tampering), отказуемости (Repudiation), отказу в обслуживании (Denial of Service),
и раскрытию информации (Information Disclosure).

![lab1_example2](pics/lab1_example1modelled.png)

Замечание: используемая методика моделирования угроз сфокусирована на сетевых взаимодействиях.
Каждый поток данных представляет сетевой сеанс от клиента (сторона без стрелки) к серверу (сторона со стрелкой).
Сетевой сеанс является двунаправленным, т.е. нет необходимости создавать поток от сервера к клиенту
(однако данный тип трафика должен учитываться).

Угрозы STRIDE являются общими, их использование требует конкретизации. Например, рассматривая незаконное изменение данных, эксперт должен уточнить, 
как злоумышленник может реализовать эту угрозу, предложив один или несколько вариантов специфических потенциальных угроз.


### Добавление предметно-ориентированных угроз

Пример 1 показывает, как работает онтологический анализ. Оригинальный движок моделирования угроз использует угрозы STRIDE, описанные в [базовой модели угроз](../docs/BASEMODEL.md),
которая является онтологией OWL (Web Ontology Language). Семантическая интерпретация (также онтология), описывающая диаграмму как набор фактов (Assertion Box - ABox),
основана на базовой модели угроз, содержащей необходимую терминологию (Terminology Box - TBox). 
Автоматический логический вывод (automatic reasoning) позволяет ассоциировать эталонные экземпляры угроз STRIDE c экземлярами семантической интерпретации.
Больше об онтологическом моделировании можно узнать в [этом руководстве](https://people.cs.uct.ac.za/~mkeet/OEbook/).


Помимо общих угроз, рассматриваемая методика позволяет использовать предметно-ориентированные угрозы.
Например, для взаимодействия между бразуером и веб-приложением может быть характерен один набор специфичных угроз, для взаимодействия между веб-приложением и базой данных - другой.
Описание подобных угроз посредством формализации экспертных знаний содержится в предметно-ориентированной (мета)модели угроз.
Каждая предметно-ориентированная модель угроз также является онтологией и включает типовые компоненты, потоки и угрозы, характерные для данного класса компьютерных систем
(например, облачные системы, Интернет вещей или программно-определяемые сети).

В этом руководстве используется предметно-ориентированная модель угроз облачных систем, основанная на [соответствующем каталоге шаблонов угроз](https://nets4geeks.github.io/acctp/).

Используя данную модель, можно трансформировать общий пример в облачный. Для этого элементы диаграммы 'app' и 'db' следует пометить как
class#CloudApplication' (смотри скриншот ниже), а 'user' - как 'class#RemoteUser'.
Концепты облачного приложения (CloudApplication) и удаленного пользователя (RemoteUser) входят в состав предметно-ориентированной модели.


![lab1_example4](pics/lab1_example2.png)

После обработки утилитой OdTMServer [элементы диаграммы](models/lab1_example2_modelled.json) (**Пример 2**) получат множество новых угроз.
На скриншоте показаны предметно-ориентированные угрозы для элемента 'user':

![lab1_example5](pics/lab1_example2modelled.png)

Используя сторонний редактор диаграмм Threat Dragon, можно обрабатывать угрозы (добавлять противодействия, определять важность или удалять).


## Упражнения

* Используя Threat Dragon, создайте диаграмму, которая включает веб-приложение (интефейс и базу данных), опубликованное посредством HTTP-балансировщика.
Тщательно определите все потоки данных. Сохраните диаграмму как файл JSON.

* Используя Threat Dragon, добавьте противодействия к угрозам элементу 'user' из [примера 2](models/lab1_example2_modelled.json); сохраните отчет как файл PDF.
Для нахождения противодействий используйте [каталог шаблонов угроз облачным компьютерным ](https://nets4geeks.github.io/acctp/catalog/) и другие источники по безопасности облачных технологий.

## Вопросы для самопроверки

* Что такое моделирование угроз?
* Какие подходы используются для моделирования угроз?
* Из каких элементов состоит диаграмма потоков данных?
* Что такое STRIDE?
* Что такое онтология и автоматический логический вывод?
* Какова роль базовой модели угроз в онтологическом моделировании угроз?
* Каковы функции предметно-ориентированных моделей угроз?

/ [главная](ru_readme.md) /
